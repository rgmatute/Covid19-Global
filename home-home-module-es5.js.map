{"version":3,"sources":["src/app/home/home.page.html","src/app/home/home.module.ts","src/app/home/home.page.scss","src/app/home/home.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n    <ion-toolbar>\\n        <ion-title>\\n            COVID-19\\n        </ion-title>\\n        <ion-searchbar animated (ionChange)=\\\"searchEvent($event)\\\" slot=\\\"end\\\" *ngIf=\\\"isSearch\\\"></ion-searchbar>\\n        <ion-buttons slot=\\\"end\\\">\\n            <ion-button (click)=\\\"ngOnInit()\\\">\\n                <ion-icon name=\\\"refresh-outline\\\"></ion-icon>\\n            </ion-button>\\n            <ion-button (click)=\\\"searchEvent(null)\\\">\\n                <ion-icon name=\\\"search-outline\\\"></ion-icon>\\n            </ion-button>\\n            <!-- \\n            <ion-button>\\n                <ion-icon name=\\\"ellipsis-vertical-outline\\\"></ion-icon>\\n            </ion-button>-->\\n            <ion-button [routerLink]=\\\"['/autor']\\\">\\n                <ion-icon name=\\\"information-circle-outline\\\"></ion-icon>\\n            </ion-button>\\n        </ion-buttons>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n    <ion-list *ngIf=\\\"countries.length>0\\\">\\n        <ion-item *ngFor=\\\"let countrie of countries | filtro: textoBuscar\\\" [routerLink]=\\\"['/home',countrie.country]\\\">\\n            <ion-avatar class=\\\"ion-text-right\\\" slot=\\\"start\\\">\\n                <ion-img [src]=\\\"countrie.countryInfo.flag\\\"></ion-img>\\n            </ion-avatar>\\n            <ion-label>\\n                <h2>{{ countrie.country }}</h2>\\n                <p>{{ countrie.casesPerOneMillion }} Cases Per One Million</p>\\n                <p>{{ countrie.deathsPerOneMillion }} Deaths Per One Million</p>\\n            </ion-label>\\n            <ion-badge color=\\\"tertiary\\\" slot=\\\"end\\\">\\n                {{ countrie.cases }} Confirmed\\n            </ion-badge>\\n        </ion-item>\\n    </ion-list>\\n\\n  <ion-list *ngIf=\\\"countries.length === 0\\\">\\n    <ion-item *ngFor=\\\"let item of [0,1,2,3,4,5,6,7,8,9]\\\">\\n        <ion-avatar slot=\\\"start\\\">\\n            <ion-skeleton-text animated></ion-skeleton-text>\\n        </ion-avatar>\\n        <ion-label>\\n            <h2> <ion-skeleton-text animated style=\\\"width: 50%\\\"></ion-skeleton-text> </h2>\\n            <p> <ion-skeleton-text animated style=\\\"width: 80%\\\"></ion-skeleton-text> </p>\\n        </ion-label>\\n      </ion-item>\\n  </ion-list>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\nimport { PipesModule } from '../pipes/pipes.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PipesModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: HomePage\n      }\n    ])\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","export default \"#container {\\n  text-align: center;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\\n#container strong {\\n  font-size: 20px;\\n  line-height: 26px;\\n}\\n\\n#container p {\\n  font-size: 16px;\\n  line-height: 22px;\\n  color: #8c8c8c;\\n  margin: 0;\\n}\\n\\n#container a {\\n  text-decoration: none;\\n}\\n\\nion-content ion-toolbar {\\n  --background: translucent;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS9DOlxcVXNlcnNcXE1hdHV0ZVxcRG9jdW1lbnRzXFxNYXRyb25Tb2Z0XFwyMDIwXFxQcm95ZWN0b3NcXElPTklDXFxjb3ZpZC0xOS9zcmNcXGFwcFxcaG9tZVxcaG9tZS5wYWdlLnNjc3MiLCJzcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBQTtFQUVBLGtCQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxRQUFBO0VBQ0EsMkJBQUE7QUNBRjs7QURHQTtFQUNFLGVBQUE7RUFDQSxpQkFBQTtBQ0FGOztBREdBO0VBQ0UsZUFBQTtFQUNBLGlCQUFBO0VBRUEsY0FBQTtFQUVBLFNBQUE7QUNGRjs7QURLQTtFQUNFLHFCQUFBO0FDRkY7O0FES0E7RUFDRSx5QkFBQTtBQ0ZGIiwiZmlsZSI6InNyYy9hcHAvaG9tZS9ob21lLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNjb250YWluZXIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG5cbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgdG9wOiA1MCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcbn1cblxuI2NvbnRhaW5lciBzdHJvbmcge1xuICBmb250LXNpemU6IDIwcHg7XG4gIGxpbmUtaGVpZ2h0OiAyNnB4O1xufVxuXG4jY29udGFpbmVyIHAge1xuICBmb250LXNpemU6IDE2cHg7XG4gIGxpbmUtaGVpZ2h0OiAyMnB4O1xuXG4gIGNvbG9yOiAjOGM4YzhjO1xuXG4gIG1hcmdpbjogMDtcbn1cblxuI2NvbnRhaW5lciBhIHtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xufVxuXG5pb24tY29udGVudCBpb24tdG9vbGJhciB7XG4gIC0tYmFja2dyb3VuZDogdHJhbnNsdWNlbnQ7XG59IiwiI2NvbnRhaW5lciB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgdG9wOiA1MCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcbn1cblxuI2NvbnRhaW5lciBzdHJvbmcge1xuICBmb250LXNpemU6IDIwcHg7XG4gIGxpbmUtaGVpZ2h0OiAyNnB4O1xufVxuXG4jY29udGFpbmVyIHAge1xuICBmb250LXNpemU6IDE2cHg7XG4gIGxpbmUtaGVpZ2h0OiAyMnB4O1xuICBjb2xvcjogIzhjOGM4YztcbiAgbWFyZ2luOiAwO1xufVxuXG4jY29udGFpbmVyIGEge1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG59XG5cbmlvbi1jb250ZW50IGlvbi10b29sYmFyIHtcbiAgLS1iYWNrZ3JvdW5kOiB0cmFuc2x1Y2VudDtcbn0iXX0= */\"","import { Component } from '@angular/core';\nimport { Covid19Service } from '../services/covid19.service';\nimport { Subscription } from 'rxjs';\nimport { LoadingController } from '@ionic/angular';\nimport { StatusBar } from '@ionic-native/status-bar/ngx';\nimport { Platform } from '@ionic/angular';\nimport { SplashScreen } from '@ionic-native/splash-screen/ngx';\nimport { Network } from '@ionic-native/network/ngx';\nimport { AlertController } from '@ionic/angular';\nimport { Router } from '@angular/router';\n\n\n@Component({\n    selector: 'app-home',\n    templateUrl: 'home.page.html',\n    styleUrls: ['home.page.scss'],\n})\nexport class HomePage {\n\n    verifyNetworSub:any=null;\n    disconnectSubscription:any=null;\n    connectSubscription:any=null;\n    countriesSub: Subscription;\n    countries:any[] = [];\n    isSearch:Boolean=false;\n    textoBuscar:String='';\n\n    constructor(\n        private covidService: Covid19Service,\n        private loadingController: LoadingController,\n        private statusBar: StatusBar,\n        private platform: Platform,\n        private splashScreen: SplashScreen,\n        public network: Network,\n        private alertController: AlertController,\n        private router: Router) {\n        // this.present();\n        this.initializeApp();\n    }\n\n    initializeApp() {\n        this.platform.ready().then(() => {\n            this.statusBar.styleDefault();\n            if(this.platform.is('android')){\n                this.statusBar.backgroundColorByHexString('#ffffff');\n            }\n            this.splashScreen.hide();\n        });\n    }\n\n    ionViewWillEnter(){\n        \n    }\n\n    searchEvent(event){\n        if(event === null){\n            this.isSearch =! this.isSearch;\n            this.textoBuscar = '';\n        }else{\n            this.textoBuscar = event.detail.value;\n        }\n    }\n\n    ngOnInit(): void {\n        this.getAllCountries();\n        this.disconnectSubscription = this.network.onDisconnect().subscribe(() => {\n            // Cuando se desconecta guardamos la la informacion en cache\n            localStorage.setItem('countries',JSON.stringify(this.countries));\n        });\n        this.connectSubscription = this.network.onConnect().subscribe(() => {\n            // Cuando se conecta actualizamos la cache guardamos la la informacion en cache\n            console.log('conectado');\n            this.getAllCountries();\n        });\n    }\n\n    getAllCountries(){\n        this.countriesSub = this.covidService.getAllCountries()\n        .subscribe(\n            data => this.cachingEasyEvent(data),\n            error => this.stopLoading(-2,error),\n            () => this.stopLoading(0,'onComplete')\n        );\n    }\n\n    cachingEasyEvent(contries:any){\n        this.countries = contries.sort((x,y)=>{ return x.cases - y.cases }).reverse();\n        localStorage.setItem('countries',JSON.stringify(this.countries));\n    }\n\n    stopLoading(code:Number,message:String){\n        // this.dismiss()\n        if(code === -1){\n            this.presentAlertOffline();\n            let caching = localStorage.getItem('countries');\n            if(caching){\n                this.countries = JSON.parse(caching);\n            }\n        }\n    }\n\n    async present() {\n        let loading = await this.loadingController.create({\n            message: 'Cargando...',\n        })\n        return await loading.present();\n    }\n\n    async dismiss() {\n        return await this.loadingController.dismiss();\n    }\n\n    async presentAlertOffline() {\n        const alert = await this.alertController.create({\n            header: 'Ups!',\n            message: 'Necesita una conexión a internet para ver información actualizada',\n            buttons: [{\n                text:'Cancelar',\n                role:'cancel',\n                cssClass:'secondary',\n                handler:(event)=>{\n                    // this.router.navigate(['/autor']);\n                }\n            },{\n                text:'Aceptar',\n                handler:(event)=>{\n                    // this.router.navigate(['/autor']);\n                }\n            }]\n          });\n        return await alert.present();\n    }\n\n    ngOnDestroy() {\n        if (this.countriesSub) {\n            this.countriesSub.unsubscribe();\n        }\n        if (this.connectSubscription) {\n            this.connectSubscription.unsubscribe();\n        }\n        if (this.disconnectSubscription) {\n            this.disconnectSubscription.unsubscribe();\n        }\n        if (this.verifyNetworSub) {\n            this.verifyNetworSub.unsubscribe();\n        }\n\n        // localStorage.removeItem('countries');\n    }\n\n}\n"],"sourceRoot":"webpack:///","file":"home-home-module-es5.js"}