{"version":3,"sources":["./src/app/home/home.page.html","./src/app/home/home.module.ts","./src/app/home/home.page.scss","./src/app/home/home.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,i4CAAk0C,oBAAoB,4BAA4B,+BAA+B,iDAAiD,gCAAgC,kIAAkI,kBAAkB,4kB;;;;;;;;;;;;;;;;;;;;;;;ACA5lD;AACM;AACF;AACA;AACE;AAER;AACa;AAiBpD,IAAa,cAAc,GAA3B,MAAa,cAAc;CAAG;AAAjB,cAAc;IAf1B,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,+DAAW;YACX,4DAAY,CAAC,QAAQ,CAAC;gBACpB;oBACE,IAAI,EAAE,EAAE;oBACR,SAAS,EAAE,mDAAQ;iBACpB;aACF,CAAC;SACH;QACD,YAAY,EAAE,CAAC,mDAAQ,CAAC;KACzB,CAAC;GACW,cAAc,CAAG;AAAH;;;;;;;;;;;;;ACxB3B;AAAe,4EAAa,uBAAuB,uBAAuB,YAAY,aAAa,aAAa,gCAAgC,GAAG,uBAAuB,oBAAoB,sBAAsB,GAAG,kBAAkB,oBAAoB,sBAAsB,mBAAmB,cAAc,GAAG,kBAAkB,0BAA0B,GAAG,6BAA6B,8BAA8B,GAAG,6CAA6C,mrD;;;;;;;;;;;;;;;;;;;;;;;ACAva;AACmB;AAEV;AACM;AACf;AACqB;AACX;AACH;AACR;AAQzC,IAAa,QAAQ,GAArB,MAAa,QAAQ;IAUjB,YACY,YAA4B,EAC5B,iBAAoC,EACpC,SAAoB,EACpB,QAAkB,EAClB,YAA0B,EAC3B,OAAgB,EACf,eAAgC,EAChC,MAAc;QAPd,iBAAY,GAAZ,YAAY,CAAgB;QAC5B,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,cAAS,GAAT,SAAS,CAAW;QACpB,aAAQ,GAAR,QAAQ,CAAU;QAClB,iBAAY,GAAZ,YAAY,CAAc;QAC3B,YAAO,GAAP,OAAO,CAAS;QACf,oBAAe,GAAf,eAAe,CAAiB;QAChC,WAAM,GAAN,MAAM,CAAQ;QAhB1B,oBAAe,GAAK,IAAI,CAAC;QACzB,2BAAsB,GAAK,IAAI,CAAC;QAChC,wBAAmB,GAAK,IAAI,CAAC;QAE7B,cAAS,GAAS,EAAE,CAAC;QACrB,aAAQ,GAAS,KAAK,CAAC;QACvB,gBAAW,GAAQ,EAAE,CAAC;QAWlB,kBAAkB;QAClB,IAAI,CAAC,aAAa,EAAE,CAAC;IACzB,CAAC;IAED,aAAa;QACT,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;YAC5B,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,CAAC;YAC9B,IAAG,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC,EAAC;gBAC3B,IAAI,CAAC,SAAS,CAAC,0BAA0B,CAAC,SAAS,CAAC,CAAC;aACxD;YACD,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;QAC7B,CAAC,CAAC,CAAC;IACP,CAAC;IAED,gBAAgB;IAEhB,CAAC;IAED,WAAW,CAAC,KAAK;QACb,IAAG,KAAK,KAAK,IAAI,EAAC;YACd,IAAI,CAAC,QAAQ,GAAE,CAAE,IAAI,CAAC,QAAQ,CAAC;YAC/B,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;SACzB;aAAI;YACD,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;SACzC;IACL,CAAC;IAED,QAAQ;QACJ,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE;YACrE,4DAA4D;YAC5D,YAAY,CAAC,OAAO,CAAC,WAAW,EAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;QACrE,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE;YAC/D,+EAA+E;YAC/E,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;YACzB,IAAI,CAAC,eAAe,EAAE,CAAC;QAC3B,CAAC,CAAC,CAAC;IACP,CAAC;IAED,eAAe;QACX,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,eAAe,EAAE;aACtD,SAAS,CACN,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,EACnC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,EAAC,KAAK,CAAC,EACnC,GAAG,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,EAAC,YAAY,CAAC,CACzC,CAAC;IACN,CAAC;IAED,gBAAgB,CAAC,QAAY;QACzB,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAC,CAAC,EAAC,EAAE,GAAE,OAAO,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,EAAC,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC;QAC9E,YAAY,CAAC,OAAO,CAAC,WAAW,EAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;IACrE,CAAC;IAED,WAAW,CAAC,IAAW,EAAC,OAAc;QAClC,iBAAiB;QACjB,IAAG,IAAI,KAAK,CAAC,CAAC,EAAC;YACX,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC3B,IAAI,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;YAChD,IAAG,OAAO,EAAC;gBACP,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;aACxC;SACJ;IACL,CAAC;IAEK,OAAO;;YACT,IAAI,OAAO,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;gBAC9C,OAAO,EAAE,aAAa;aACzB,CAAC;YACF,OAAO,MAAM,OAAO,CAAC,OAAO,EAAE,CAAC;QACnC,CAAC;KAAA;IAEK,OAAO;;YACT,OAAO,MAAM,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,CAAC;QAClD,CAAC;KAAA;IAEK,mBAAmB;;YACrB,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC5C,MAAM,EAAE,MAAM;gBACd,OAAO,EAAE,mEAAmE;gBAC5E,OAAO,EAAE,CAAC;wBACN,IAAI,EAAC,UAAU;wBACf,IAAI,EAAC,QAAQ;wBACb,QAAQ,EAAC,WAAW;wBACpB,OAAO,EAAC,CAAC,KAAK,EAAC,EAAE;4BACb,oCAAoC;wBACxC,CAAC;qBACJ,EAAC;wBACE,IAAI,EAAC,SAAS;wBACd,OAAO,EAAC,CAAC,KAAK,EAAC,EAAE;4BACb,oCAAoC;wBACxC,CAAC;qBACJ,CAAC;aACH,CAAC,CAAC;YACL,OAAO,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;QACjC,CAAC;KAAA;IAED,WAAW;QACP,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;SACnC;QACD,IAAI,IAAI,CAAC,mBAAmB,EAAE;YAC1B,IAAI,CAAC,mBAAmB,CAAC,WAAW,EAAE,CAAC;SAC1C;QACD,IAAI,IAAI,CAAC,sBAAsB,EAAE;YAC7B,IAAI,CAAC,sBAAsB,CAAC,WAAW,EAAE,CAAC;SAC7C;QACD,IAAI,IAAI,CAAC,eAAe,EAAE;YACtB,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE,CAAC;SACtC;QAED,wCAAwC;IAC5C,CAAC;CAEJ;;YA1H6B,wEAAc;YACT,gEAAiB;YACzB,sEAAS;YACV,uDAAQ;YACJ,4EAAY;YAClB,iEAAO;YACE,8DAAe;YACxB,sDAAM;;AAlBjB,QAAQ;IALpB,+DAAS,CAAC;QACP,QAAQ,EAAE,UAAU;QACpB,sMAA6B;;KAEhC,CAAC;2EAY4B,wEAAc;QACT,gEAAiB;QACzB,sEAAS;QACV,uDAAQ;QACJ,4EAAY;QAClB,iEAAO;QACE,8DAAe;QACxB,sDAAM;GAlBjB,QAAQ,CAqIpB;AArIoB","file":"home-home-module-es2015.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n    <ion-toolbar>\\n        <ion-title>\\n            COVID-19\\n        </ion-title>\\n        <ion-searchbar animated (ionChange)=\\\"searchEvent($event)\\\" slot=\\\"end\\\" *ngIf=\\\"isSearch\\\"></ion-searchbar>\\n        <ion-buttons slot=\\\"end\\\">\\n            <ion-button (click)=\\\"ngOnInit()\\\">\\n                <ion-icon name=\\\"refresh-outline\\\"></ion-icon>\\n            </ion-button>\\n            <ion-button (click)=\\\"searchEvent(null)\\\">\\n                <ion-icon name=\\\"search-outline\\\"></ion-icon>\\n            </ion-button>\\n            <!-- \\n            <ion-button>\\n                <ion-icon name=\\\"ellipsis-vertical-outline\\\"></ion-icon>\\n            </ion-button>-->\\n            <ion-button [routerLink]=\\\"['/autor']\\\">\\n                <ion-icon name=\\\"information-circle-outline\\\"></ion-icon>\\n            </ion-button>\\n        </ion-buttons>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n    <ion-list *ngIf=\\\"countries.length>0\\\">\\n        <ion-item *ngFor=\\\"let countrie of countries | filtro: textoBuscar\\\" [routerLink]=\\\"['/home',countrie.country]\\\">\\n            <ion-avatar class=\\\"ion-text-right\\\" slot=\\\"start\\\">\\n                <ion-img [src]=\\\"countrie.countryInfo.flag\\\"></ion-img>\\n            </ion-avatar>\\n            <ion-label>\\n                <h2>{{ countrie.country }}</h2>\\n                <p>{{ countrie.casesPerOneMillion }} Cases Per One Million</p>\\n                <p>{{ countrie.deathsPerOneMillion }} Deaths Per One Million</p>\\n            </ion-label>\\n            <ion-badge color=\\\"tertiary\\\" slot=\\\"end\\\">\\n                {{ countrie.cases }} Confirmed\\n            </ion-badge>\\n        </ion-item>\\n    </ion-list>\\n\\n  <ion-list *ngIf=\\\"countries.length === 0\\\">\\n    <ion-item *ngFor=\\\"let item of [0,1,2,3,4,5,6,7,8,9]\\\">\\n        <ion-avatar slot=\\\"start\\\">\\n            <ion-skeleton-text animated></ion-skeleton-text>\\n        </ion-avatar>\\n        <ion-label>\\n            <h2> <ion-skeleton-text animated style=\\\"width: 50%\\\"></ion-skeleton-text> </h2>\\n            <p> <ion-skeleton-text animated style=\\\"width: 80%\\\"></ion-skeleton-text> </p>\\n        </ion-label>\\n      </ion-item>\\n  </ion-list>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\nimport { PipesModule } from '../pipes/pipes.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PipesModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: HomePage\n      }\n    ])\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","export default \"#container {\\n  text-align: center;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\\n#container strong {\\n  font-size: 20px;\\n  line-height: 26px;\\n}\\n\\n#container p {\\n  font-size: 16px;\\n  line-height: 22px;\\n  color: #8c8c8c;\\n  margin: 0;\\n}\\n\\n#container a {\\n  text-decoration: none;\\n}\\n\\nion-content ion-toolbar {\\n  --background: translucent;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS9DOlxcVXNlcnNcXE1hdHV0ZVxcRG9jdW1lbnRzXFxNYXRyb25Tb2Z0XFwyMDIwXFxQcm95ZWN0b3NcXElPTklDXFxjb3ZpZC0xOS9zcmNcXGFwcFxcaG9tZVxcaG9tZS5wYWdlLnNjc3MiLCJzcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBQTtFQUVBLGtCQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxRQUFBO0VBQ0EsMkJBQUE7QUNBRjs7QURHQTtFQUNFLGVBQUE7RUFDQSxpQkFBQTtBQ0FGOztBREdBO0VBQ0UsZUFBQTtFQUNBLGlCQUFBO0VBRUEsY0FBQTtFQUVBLFNBQUE7QUNGRjs7QURLQTtFQUNFLHFCQUFBO0FDRkY7O0FES0E7RUFDRSx5QkFBQTtBQ0ZGIiwiZmlsZSI6InNyYy9hcHAvaG9tZS9ob21lLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNjb250YWluZXIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG5cbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgdG9wOiA1MCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcbn1cblxuI2NvbnRhaW5lciBzdHJvbmcge1xuICBmb250LXNpemU6IDIwcHg7XG4gIGxpbmUtaGVpZ2h0OiAyNnB4O1xufVxuXG4jY29udGFpbmVyIHAge1xuICBmb250LXNpemU6IDE2cHg7XG4gIGxpbmUtaGVpZ2h0OiAyMnB4O1xuXG4gIGNvbG9yOiAjOGM4YzhjO1xuXG4gIG1hcmdpbjogMDtcbn1cblxuI2NvbnRhaW5lciBhIHtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xufVxuXG5pb24tY29udGVudCBpb24tdG9vbGJhciB7XG4gIC0tYmFja2dyb3VuZDogdHJhbnNsdWNlbnQ7XG59IiwiI2NvbnRhaW5lciB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgdG9wOiA1MCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcbn1cblxuI2NvbnRhaW5lciBzdHJvbmcge1xuICBmb250LXNpemU6IDIwcHg7XG4gIGxpbmUtaGVpZ2h0OiAyNnB4O1xufVxuXG4jY29udGFpbmVyIHAge1xuICBmb250LXNpemU6IDE2cHg7XG4gIGxpbmUtaGVpZ2h0OiAyMnB4O1xuICBjb2xvcjogIzhjOGM4YztcbiAgbWFyZ2luOiAwO1xufVxuXG4jY29udGFpbmVyIGEge1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG59XG5cbmlvbi1jb250ZW50IGlvbi10b29sYmFyIHtcbiAgLS1iYWNrZ3JvdW5kOiB0cmFuc2x1Y2VudDtcbn0iXX0= */\"","import { Component } from '@angular/core';\nimport { Covid19Service } from '../services/covid19.service';\nimport { Subscription } from 'rxjs';\nimport { LoadingController } from '@ionic/angular';\nimport { StatusBar } from '@ionic-native/status-bar/ngx';\nimport { Platform } from '@ionic/angular';\nimport { SplashScreen } from '@ionic-native/splash-screen/ngx';\nimport { Network } from '@ionic-native/network/ngx';\nimport { AlertController } from '@ionic/angular';\nimport { Router } from '@angular/router';\n\n\n@Component({\n    selector: 'app-home',\n    templateUrl: 'home.page.html',\n    styleUrls: ['home.page.scss'],\n})\nexport class HomePage {\n\n    verifyNetworSub:any=null;\n    disconnectSubscription:any=null;\n    connectSubscription:any=null;\n    countriesSub: Subscription;\n    countries:any[] = [];\n    isSearch:Boolean=false;\n    textoBuscar:String='';\n\n    constructor(\n        private covidService: Covid19Service,\n        private loadingController: LoadingController,\n        private statusBar: StatusBar,\n        private platform: Platform,\n        private splashScreen: SplashScreen,\n        public network: Network,\n        private alertController: AlertController,\n        private router: Router) {\n        // this.present();\n        this.initializeApp();\n    }\n\n    initializeApp() {\n        this.platform.ready().then(() => {\n            this.statusBar.styleDefault();\n            if(this.platform.is('android')){\n                this.statusBar.backgroundColorByHexString('#ffffff');\n            }\n            this.splashScreen.hide();\n        });\n    }\n\n    ionViewWillEnter(){\n        \n    }\n\n    searchEvent(event){\n        if(event === null){\n            this.isSearch =! this.isSearch;\n            this.textoBuscar = '';\n        }else{\n            this.textoBuscar = event.detail.value;\n        }\n    }\n\n    ngOnInit(): void {\n        this.getAllCountries();\n        this.disconnectSubscription = this.network.onDisconnect().subscribe(() => {\n            // Cuando se desconecta guardamos la la informacion en cache\n            localStorage.setItem('countries',JSON.stringify(this.countries));\n        });\n        this.connectSubscription = this.network.onConnect().subscribe(() => {\n            // Cuando se conecta actualizamos la cache guardamos la la informacion en cache\n            console.log('conectado');\n            this.getAllCountries();\n        });\n    }\n\n    getAllCountries(){\n        this.countriesSub = this.covidService.getAllCountries()\n        .subscribe(\n            data => this.cachingEasyEvent(data),\n            error => this.stopLoading(-2,error),\n            () => this.stopLoading(0,'onComplete')\n        );\n    }\n\n    cachingEasyEvent(contries:any){\n        this.countries = contries.sort((x,y)=>{ return x.cases - y.cases }).reverse();\n        localStorage.setItem('countries',JSON.stringify(this.countries));\n    }\n\n    stopLoading(code:Number,message:String){\n        // this.dismiss()\n        if(code === -1){\n            this.presentAlertOffline();\n            let caching = localStorage.getItem('countries');\n            if(caching){\n                this.countries = JSON.parse(caching);\n            }\n        }\n    }\n\n    async present() {\n        let loading = await this.loadingController.create({\n            message: 'Cargando...',\n        })\n        return await loading.present();\n    }\n\n    async dismiss() {\n        return await this.loadingController.dismiss();\n    }\n\n    async presentAlertOffline() {\n        const alert = await this.alertController.create({\n            header: 'Ups!',\n            message: 'Necesita una conexión a internet para ver información actualizada',\n            buttons: [{\n                text:'Cancelar',\n                role:'cancel',\n                cssClass:'secondary',\n                handler:(event)=>{\n                    // this.router.navigate(['/autor']);\n                }\n            },{\n                text:'Aceptar',\n                handler:(event)=>{\n                    // this.router.navigate(['/autor']);\n                }\n            }]\n          });\n        return await alert.present();\n    }\n\n    ngOnDestroy() {\n        if (this.countriesSub) {\n            this.countriesSub.unsubscribe();\n        }\n        if (this.connectSubscription) {\n            this.connectSubscription.unsubscribe();\n        }\n        if (this.disconnectSubscription) {\n            this.disconnectSubscription.unsubscribe();\n        }\n        if (this.verifyNetworSub) {\n            this.verifyNetworSub.unsubscribe();\n        }\n\n        // localStorage.removeItem('countries');\n    }\n\n}\n"],"sourceRoot":"webpack:///"}